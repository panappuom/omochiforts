---
interface Props {
  href: string;
  coverSrc: string;
  alt?: string;
  side?: 'left' | 'right';
  // 表示サイズ（カード横に出すキャラ）
  peekW?: number; peekH?: number;
  // 目の座標・サイズ（右端＆縦センター基準のオフセット）
  emoX?: number; emoY?: number; emoW?: number; emoH?: number;
  // パーツ画像
  bodySrc: string; handSrc: string; eyeOpenSrc: string; eyeCloseSrc: string;
}
const {
  href, coverSrc, alt = '',
  side = 'right',
  peekW = 110, peekH = 110,
  emoX = 16, emoY = -4, emoW = 28, emoH = 28,
  bodySrc, handSrc, eyeOpenSrc, eyeCloseSrc,
} = Astro.props;
---
<!-- 必要ならCSSはレイアウトで一括読み込みでもOK -->
<div
  class="card-wrap"
  data-peek={side}
  style={`--peek-w:${peekW}px; --peek-h:${peekH}px; --emo-x:${emoX}px; --emo-y:${emoY}px; --emo-w:${emoW}px; --emo-h:${emoH}px;`}
>
  <a class="card" href={href}>
    <img src={coverSrc} alt={alt} loading="lazy" decoding="async" />
  </a>

  <!-- 体＝カードの後ろ側（z低） -->
  <img class="peek-body" src={bodySrc} alt="" aria-hidden="true" loading="lazy" decoding="async" />
  <!-- 手＝カードの上（z高） -->
  <img class="peek-hand" src={handSrc} alt="" aria-hidden="true" loading="lazy" decoding="async" />

  <!-- 目（最小切り抜き差分） -->
  <img class="peek-eye"
       src={eyeOpenSrc}
       data-open={eyeOpenSrc}
       data-close={eyeCloseSrc}
       alt="" aria-hidden="true" loading="lazy" decoding="async" />

  <!-- クリック判定（手の近く） -->
  <button class="peek-hit" type="button" aria-label="キャラクターを引っ込める"></button>
</div>
